# 实验：使用 GEP 进行周期序列拟合

GEP 是 “ 基因表达式编程（Gene Expression Programming） ” 的缩写，它的主要作用之一是进行函数生成。这里利用它来做数据点的拟合实验。实验针对的是具有一定周期性的数据。

## 目的

找到能在可接受误差范围内拟合数据集的函数表达式。

## 原理

1. 先对一个确定的函数（ target function ）进行采样得到许多离散的点，用来做数据集。
2. 使用 GEP 来生成表达式得到测试函数（ test function ）。
3. 把数据集代入测试函数，用测试函数运算结果与数据集的差异计算误差（ different ），从而算出适应度`f=1/(SUM(abs(different))/total+0.1)`。
4. 利用 GEP 迭代的过程来找到适应度足够高的测试函数，最后得到可以拟合数据集的函数。

## 实现

使用 C++ ，基于已有的仓库 [基因表达式编程（GEP）](https://gitee.com/az13js/GEP) 来修改。实验对原有代码的主要改造为：

1. 通过`Dataset`类（新增）来提供实验需要的数据集，实现逻辑位于文件`src/Dataset.h`。
2. 原有的产生表达式的基础是文件`src/Op.h`中的`Op`类。新增只接受一个参数的`sin`函数作为`OP_OPERATION`类型，
新增接受测试集数据用的`OP_NUMBER`类型。
3. 修改文件`src/GeneticAlgorithm/Chromosome.h`和`src\GeneticAlgorithm\ChromosomeFactory.h`支持`Op`发生的改动，修改适应度计算方法。

## 结果

实验使用的目标函数是一个以正弦函数为基础叠加出来的复合函数，在区间`[0,1]`进行了间隔`1/101`的采样，函数和数据集的情况为：

![函数图像](TARGET.jpg)

经过训练，无论如何都不理想。

    代数=10000, 最大适应度=2.51317, 平均=2.4669, 个体信息：
    (sin((((-0.77766)/x)*((-0.14026)-(-0.223453))))*(((1.3585*1.54122)-(0.967051/x))*sin(x)))
    结束。
